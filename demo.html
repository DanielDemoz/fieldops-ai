<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FieldOps AI - Interactive Demo | Brukd Consultancy</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #0e1117;
            color: #fafafa;
            line-height: 1.6;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #1e2129;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #2a2d35;
        }

        .sidebar h1 {
            font-size: 24px;
            color: #2563eb;
            margin-bottom: 10px;
        }

        .sidebar h2 {
            font-size: 14px;
            color: #9ca3af;
            font-weight: normal;
            margin-bottom: 30px;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-section h3 {
            font-size: 12px;
            color: #9ca3af;
            text-transform: uppercase;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
        }

        .company-info {
            background: #262730;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .company-info h4 {
            color: #fff;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .company-info .badge {
            display: inline-block;
            background: #1e40af;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            margin-top: 8px;
            margin-right: 5px;
        }

        .company-info p {
            color: #9ca3af;
            font-size: 12px;
            margin: 4px 0;
        }

        .main-content {
            margin-left: 280px;
            padding: 40px;
            min-height: 100vh;
        }

        .header {
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 36px;
            color: #fff;
            margin-bottom: 10px;
        }

        .header p {
            color: #9ca3af;
            font-size: 16px;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: #1e2129;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #2a2d35;
        }

        .metric-label {
            color: #9ca3af;
            font-size: 12px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .metric-value {
            color: #fff;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .metric-delta {
            font-size: 12px;
        }

        .metric-delta.positive {
            color: #4ade80;
        }

        .metric-delta.negative {
            color: #f87171;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 1px solid #2a2d35;
        }

        .tab {
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            font-size: 14px;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: #fff;
        }

        .tab.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: #1e2129;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #2a2d35;
            margin-bottom: 20px;
        }

        .card h3 {
            color: #fff;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .job-list {
            display: grid;
            gap: 15px;
        }

        .job-item {
            background: #262730;
            padding: 15px;
            border-radius: 6px;
            border-left: 3px solid #2563eb;
        }

        .job-item h4 {
            color: #fff;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .job-item p {
            color: #9ca3af;
            font-size: 12px;
            margin: 4px 0;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-scheduled {
            background: #2563eb;
            color: #fff;
        }

        .status-in-progress {
            background: #f59e0b;
            color: #fff;
        }

        .status-completed {
            background: #10b981;
            color: #fff;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #2a2d35;
        }

        .data-table th {
            color: #9ca3af;
            font-size: 12px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .data-table td {
            color: #fff;
            font-size: 14px;
        }

        .date-selector {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }

        .date-selector input {
            background: #262730;
            border: 1px solid #2a2d35;
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
        }

        .btn {
            padding: 10px 20px;
            background: #2563eb;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #1e40af;
        }

        .chart-container {
            background: #1e2129;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .alert-warning {
            background: #78350f;
            border: 1px solid #92400e;
            color: #fbbf24;
        }

        .alert-info {
            background: #1e3a5f;
            border: 1px solid #2563eb;
            color: #93c5fd;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div style="margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #2a2d35;">
            <h4 style="color: #2563eb; font-size: 14px; font-weight: 600; margin-bottom: 5px;">BRUKD CONSULTANCY</h4>
            <p style="color: #9ca3af; font-size: 12px;">Practical, Profitable & Responsible AI</p>
        </div>
        <h1>FieldOps AI</h1>
        <h2>Smart Scheduler & Job-Costing Platform</h2>
        
        <div class="company-info">
            <h4>Toronto HVAC Solutions</h4>
            <p>12 Technicians</p>
            <p>50+ Active Jobs</p>
            <p>HVAC & Electrical Services</p>
            <div style="margin-top: 10px;">
                <span class="badge">PIPEDA-Compliant</span>
                <span class="badge">CDAP Eligible</span>
            </div>
        </div>

        <div class="sidebar-section">
            <h3>Navigation</h3>
            <p style="color: #9ca3af; font-size: 12px;">Select a tab below to explore features</p>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>FieldOps AI Dashboard</h1>
            <p>Toronto HVAC Solutions - Real-time Operations Overview</p>
        </div>

        <div class="metrics">
            <div class="metric-card">
                <div class="metric-label">Active Jobs</div>
                <div class="metric-value">23</div>
                <div class="metric-delta positive">+3 today</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Technicians</div>
                <div class="metric-value">12</div>
                <div class="metric-delta">Active</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Pending Invoices</div>
                <div class="metric-value">8</div>
                <div class="metric-delta negative">-2 this week</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Today's Revenue</div>
                <div class="metric-value">$12,450</div>
                <div class="metric-delta positive">+12% vs yesterday</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('scheduler')">Scheduler</button>
            <button class="tab" onclick="showTab('crew')">Crew Management</button>
            <button class="tab" onclick="showTab('inventory')">Inventory</button>
            <button class="tab" onclick="showTab('financials')">Financials</button>
            <button class="tab" onclick="showTab('analytics')">Analytics</button>
        </div>

        <!-- Scheduler Tab -->
        <div id="scheduler" class="tab-content active">
            <div class="card">
                <h3>Smart Scheduler</h3>
                <div class="date-selector">
                    <label style="color: #9ca3af; font-size: 14px;">Select Date:</label>
                    <input type="date" id="schedule-date" value="2024-10-30" onchange="updateSchedule()">
                    <button class="btn" onclick="optimizeRoutes()">Optimize Today's Routes</button>
                </div>
                <div id="schedule-jobs" class="job-list"></div>
            </div>
        </div>

        <!-- Crew Management Tab -->
        <div id="crew" class="tab-content">
            <div class="card">
                <h3>Crew Management</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Specialty</th>
                            <th>Active Jobs</th>
                            <th>Rating</th>
                        </tr>
                    </thead>
                    <tbody id="crew-table"></tbody>
                </table>
            </div>
            <div class="chart-container">
                <div id="crew-chart"></div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div id="inventory" class="tab-content">
            <div class="card">
                <h3>Inventory & Parts Tracking</h3>
                <div class="alert alert-warning" id="low-stock-alert" style="display: none;">
                    Warning: 5 items need reordering
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Part Name</th>
                            <th>Category</th>
                            <th>Current Stock</th>
                            <th>Reorder Level</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-table"></tbody>
                </table>
            </div>
        </div>

        <!-- Financials Tab -->
        <div id="financials" class="tab-content">
            <div class="card">
                <h3>Financial Dashboard</h3>
                <div class="chart-container">
                    <div id="revenue-chart"></div>
                </div>
                <div class="chart-container">
                    <div id="invoice-status-chart"></div>
                </div>
                <div class="chart-container">
                    <div id="cash-flow-chart"></div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="card">
                <h3>Analytics & KPIs</h3>
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-label">Avg Travel Time</div>
                        <div class="metric-value">25 min</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Jobs Per Day</div>
                        <div class="metric-value">1.8</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Profit Per Job</div>
                        <div class="metric-value">$245</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Material Cost Variance</div>
                        <div class="metric-value">5.2%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Technician Utilization</div>
                        <div class="metric-value">78.5%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">30-Day Cash Balance</div>
                        <div class="metric-value">$14,200</div>
                    </div>
                </div>
                <div class="chart-container">
                    <div id="completion-trend-chart"></div>
                </div>
            </div>
        </div>

        <div class="footer-banner">
            <h3>Brukd Consultancy</h3>
            <p>Practical, Profitable & Responsible AI for Canadian Small and Medium Businesses</p>
            <p style="margin-top: 15px;">
                <a href="https://brukdconsultancy.com/" target="_blank" style="color: #60a5fa; text-decoration: none;">Visit Brukd Consultancy</a> | 
                <a href="https://brukdconsultancy.com/contact" target="_blank" style="color: #60a5fa; text-decoration: none;">Contact Us</a> | 
                <a href="https://github.com/DanielDemoz/fieldops-ai" target="_blank" style="color: #60a5fa; text-decoration: none;">View Repository</a>
            </p>
            <p style="font-size: 12px; color: #60a5fa; margin-top: 10px;">
                PIPEDA-Compliant • CDAP Funding Eligible • Canada-based Support
            </p>
        </div>
    </div>

    <script>
        // Sample data
        const sampleJobs = [
            { id: 101, type: 'HVAC Repair', location: '123 Main St, Toronto', tech: 'John Smith', status: 'scheduled', duration: 3, customer: 'ABC Corp' },
            { id: 102, type: 'AC Installation', location: '456 Oak Ave, Toronto', tech: 'Sarah Johnson', status: 'in_progress', duration: 5, customer: 'XYZ Ltd' },
            { id: 103, type: 'Furnace Maintenance', location: '789 Pine Rd, Toronto', tech: 'Mike Davis', status: 'scheduled', duration: 2, customer: 'Tech Solutions' },
            { id: 104, type: 'Electrical Wiring', location: '321 Elm St, Toronto', tech: 'John Smith', status: 'scheduled', duration: 4, customer: 'Home Services' },
        ];

        const sampleCrew = [
            { name: 'John Smith', specialty: 'HVAC', jobs: 4, rating: 4.8 },
            { name: 'Sarah Johnson', specialty: 'Electrical', jobs: 3, rating: 4.9 },
            { name: 'Mike Davis', specialty: 'HVAC', jobs: 5, rating: 4.7 },
            { name: 'Lisa Anderson', specialty: 'Plumbing', jobs: 2, rating: 4.6 },
            { name: 'Tom Wilson', specialty: 'General Repair', jobs: 6, rating: 4.5 },
        ];

        const sampleInventory = [
            { name: 'Air Filter', category: 'HVAC Parts', stock: 45, reorder: 20, status: 'OK' },
            { name: 'Thermostat', category: 'HVAC Parts', stock: 8, reorder: 10, status: 'Low Stock' },
            { name: 'Refrigerant', category: 'HVAC Parts', stock: 25, reorder: 15, status: 'OK' },
            { name: 'Circuit Breaker', category: 'Electrical', stock: 12, reorder: 15, status: 'Low Stock' },
            { name: 'Wire (14 AWG)', category: 'Electrical', stock: 150, reorder: 50, status: 'OK' },
            { name: 'Multimeter', category: 'Tools', stock: 6, reorder: 10, status: 'Low Stock' },
        ];

        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Load data for tab
            if (tabName === 'scheduler') updateSchedule();
            if (tabName === 'crew') updateCrew();
            if (tabName === 'inventory') updateInventory();
            if (tabName === 'financials') updateFinancials();
            if (tabName === 'analytics') updateAnalytics();
        }

        // Update scheduler
        function updateSchedule() {
            const container = document.getElementById('schedule-jobs');
            container.innerHTML = '';
            
            const jobsByTech = {};
            sampleJobs.forEach(job => {
                if (!jobsByTech[job.tech]) jobsByTech[job.tech] = [];
                jobsByTech[job.tech].push(job);
            });

            Object.keys(jobsByTech).forEach(tech => {
                const techDiv = document.createElement('div');
                techDiv.style.marginBottom = '20px';
                techDiv.innerHTML = `<h4 style="color: #fff; margin-bottom: 10px;">${tech} (${jobsByTech[tech].length} jobs)</h4>`;
                
                jobsByTech[tech].forEach(job => {
                    const jobDiv = document.createElement('div');
                    jobDiv.className = 'job-item';
                    jobDiv.innerHTML = `
                        <h4>Job #${job.id}: ${job.type} at ${job.location}</h4>
                        <p>Status: <span class="status-badge status-${job.status.replace('_', '-')}">${job.status.replace('_', ' ')}</span></p>
                        <p>Est. Duration: ${job.duration} hrs | Customer: ${job.customer}</p>
                    `;
                    techDiv.appendChild(jobDiv);
                });
                container.appendChild(techDiv);
            });
        }

        function optimizeRoutes() {
            alert('Routes optimized successfully!');
            updateSchedule();
        }

        // Update crew
        function updateCrew() {
            const tbody = document.getElementById('crew-table');
            tbody.innerHTML = '';
            
            sampleCrew.forEach(member => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${member.name}</td>
                    <td>${member.specialty}</td>
                    <td>${member.jobs}</td>
                    <td>${member.rating.toFixed(1)}</td>
                `;
                tbody.appendChild(row);
            });

            // Chart
            const trace = {
                x: sampleCrew.map(c => c.name),
                y: sampleCrew.map(c => c.jobs),
                type: 'bar',
                marker: { color: '#2563eb' }
            };
            Plotly.newPlot('crew-chart', [trace], {
                title: 'Jobs Completed (Last 30 Days)',
                paper_bgcolor: '#1e2129',
                plot_bgcolor: '#262730',
                font: { color: '#fff' },
                xaxis: { title: 'Technician' },
                yaxis: { title: 'Jobs Completed' }
            }, { responsive: true });
        }

        // Update inventory
        function updateInventory() {
            const tbody = document.getElementById('inventory-table');
            tbody.innerHTML = '';
            
            let lowStockCount = 0;
            sampleInventory.forEach(item => {
                const isLow = item.stock <= item.reorder;
                if (isLow) lowStockCount++;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.category}</td>
                    <td>${item.stock}</td>
                    <td>${item.reorder}</td>
                    <td><span class="status-badge ${isLow ? 'status-in-progress' : 'status-completed'}">${item.status}</span></td>
                `;
                tbody.appendChild(row);
            });

            if (lowStockCount > 0) {
                document.getElementById('low-stock-alert').style.display = 'block';
            }
        }

        // Update financials
        function updateFinancials() {
            // Revenue chart
            const revenueTrace = {
                x: ['Aug', 'Sep', 'Oct'],
                y: [35000, 42000, 38500],
                type: 'scatter',
                mode: 'lines+markers',
                line: { color: '#2563eb', width: 3 },
                marker: { size: 10 }
            };
            Plotly.newPlot('revenue-chart', [revenueTrace], {
                title: 'Monthly Revenue Trend',
                paper_bgcolor: '#1e2129',
                plot_bgcolor: '#262730',
                font: { color: '#fff' }
            }, { responsive: true });

            // Invoice status
            const invoiceTrace = {
                labels: ['Paid', 'Pending', 'Overdue'],
                values: [15, 8, 2],
                type: 'pie',
                marker: { colors: ['#10b981', '#f59e0b', '#ef4444'] }
            };
            Plotly.newPlot('invoice-status-chart', [invoiceTrace], {
                title: 'Invoice Status Distribution',
                paper_bgcolor: '#1e2129',
                font: { color: '#fff' }
            }, { responsive: true });

            // Cash flow
            const cashFlowTrace = {
                x: Array.from({length: 30}, (_, i) => {
                    const date = new Date();
                    date.setDate(date.getDate() + i);
                    return date.toISOString().split('T')[0];
                }),
                y: Array.from({length: 30}, (_, i) => 15000 + i * 50 + Math.sin(i) * 500),
                type: 'scatter',
                mode: 'lines',
                line: { color: '#3b82f6', width: 2 },
                fill: 'tozeroy',
                fillcolor: 'rgba(59, 130, 246, 0.2)'
            };
            Plotly.newPlot('cash-flow-chart', [cashFlowTrace], {
                title: '30-Day Cash Flow Forecast',
                paper_bgcolor: '#1e2129',
                plot_bgcolor: '#262730',
                font: { color: '#fff' },
                shapes: [{
                    type: 'line',
                    x0: 0, x1: 1, xref: 'paper',
                    y0: 0, y1: 0, yref: 'y',
                    line: { color: '#ef4444', width: 2, dash: 'dash' }
                }]
            }, { responsive: true });
        }

        // Update analytics
        function updateAnalytics() {
            const completionTrace = {
                x: Array.from({length: 30}, (_, i) => {
                    const date = new Date();
                    date.setDate(date.getDate() - 29 + i);
                    return date.toISOString().split('T')[0];
                }),
                y: Array.from({length: 30}, () => Math.floor(Math.random() * 5) + 1),
                type: 'bar',
                marker: { color: '#2563eb' }
            };
            Plotly.newPlot('completion-trend-chart', [completionTrace], {
                title: 'Daily Jobs Completed (Last 30 Days)',
                paper_bgcolor: '#1e2129',
                plot_bgcolor: '#262730',
                font: { color: '#fff' },
                xaxis: { title: 'Date' },
                yaxis: { title: 'Completed Jobs' }
            }, { responsive: true });
        }

        // Initialize
        window.onload = function() {
            updateSchedule();
        };
    </script>
</body>
</html>
